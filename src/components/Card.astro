---
export interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  iconSrc?: string;
  iconBg?: string;
  category?: string;
  cardBg?: string;
  url?: string;
}

const {
  title = "Unsplash",
  subtitle = "Free High-Resolution Stock Photos",
  description = "Find beautiful free images to elevate your designs.",
  iconSrc = "/unsplash-icon.png",
  iconBg = "#000000",
  category = "Tool",
  cardBg = "linear-gradient(135deg, rgba(45, 45, 55, 0.8) 0%, rgba(35, 35, 45, 0.8) 100%)",
  url = "#"
} = Astro.props;
---

<div
  class="relative p-7 w-80 min-h-[260px] flex flex-col gap-6 rounded-2xl border border-white/10 cursor-pointer overflow-hidden transition-all duration-300 ease-in-out backdrop-blur-md hover:-translate-y-2 hover:border-white/20 hover:shadow-2xl group"
  style={`background: ${cardBg}`}
>
  <!-- Badge de categoría -->
  <div class="absolute top-4 right-4 z-20">
    <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-white/10 text-white/90 backdrop-blur-sm border border-white/20">
      {category}
    </span>
  </div>

  <!-- Overlay efecto de brillo/sombra -->
  <div
    class="absolute inset-0 pointer-events-none bg-gradient-to-br from-white/5 via-white/2 to-black/5"
  >
  </div>

  <!-- Icono -->
  <div
    class="w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0 relative z-10 shadow-lg"
    style={`background-color: ${iconBg}`}
  >
    <img
      src={iconSrc}
      alt={`${title} icon`}
      class="w-10 h-10 object-contain brightness-110"
      loading="lazy"
      onerror="this.style.display='none'"
    />
  </div>

  <!-- Contenido -->
  <div class="relative z-10 flex flex-col gap-4 flex-1"> 
    <!-- Contenido principal -->
    <div class="flex-1 flex flex-col gap-2">
      <h3 class="text-white text-xl font-bold leading-snug group-hover:text-white/95 transition-colors">{title}</h3>
      <p class="text-base font-medium text-slate-300">{subtitle}</p>
      <p class="text-sm text-slate-400 opacity-90 leading-relaxed line-clamp-3">{description}</p>
    </div>

    <!-- Botón funcional abajo a la derecha -->
    <div class="flex justify-end mt-auto pt-2">
      <a
        href={url}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white font-medium rounded-full hover:bg-white/20 active:bg-white/30 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-white/40 focus:ring-offset-2 focus:ring-offset-transparent border border-white/20 hover:border-white/30 hover:scale-105"
        aria-label={`Visitar ${title}`}
      >
        <span class="text-sm">Visitar</span>
        <i data-feather="external-link" class="w-4 h-4"></i>
      </a>
    </div>
  </div>

  <!-- Efecto de hover glow -->
  <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"></div>
  </div>
</div>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>